from player import player
from Schedule import *
from read import *


def listTeams(): #list all team names
    for x in teams:
        print(x.getName())
 
 
def viewTeam():
    x=input("What team would you like to view? ")
    print()
    for y in teams:
        if y.getName()==x:
            print(y.getName(),y.getGrade()+"th Grade "+y.getGender()+"s")
            for p in y.getPlayers():
                print(p.getName())
            return
    print("Team not found.")


def findPlayer():
    b = False
    name = input("What is the name of the player you would like to find (first and last name)?: ")
    
    for a in players:
        if (a.getName() == name):
            print("{} found in database!".format(name))
            #display stats
            print("PLAYER STATS")
            a.stats()
            b = True
            break
    
    if (b == False):
        print("Player not found in database.")
                
    
def schedule():
    readFile()
    while(True):
        x=int(input("\nWhat would you like to do?\n1. Add new month\n2. View month\n3. View a list of all generated months\n4. Return to menu"))
        if x==1:
            addMonth()
        elif x==2:
            findMonth()
        elif x==3:
            print(months)
        else:
            return


def Pranking():
    players.sort(key=lambda x: x.getAverage())
    c = 0
    for a in players:
        c += 1
        a.changeRank(c)
    
    
        
def Tranking():
    count = 0
    rank = 0
    for a in teams:
        for x in a.getPlayers():
            count = count + 1
            rank = rank + x.getRank()
    
        rank = rank / count
        a.changeRanking(rank)
    
    teams.sort(key = lambda x : x.getRanking())
    
    count = 0
    for a in teams:
        count = count + 1
        a.changeRanking(count)
    
    
            
            
            

def TprintRank():
    print("TEAM RANKINGS")
    for a in teams:
        print (a.getRanking(), a.getName())
    
    
    
def PprintRank():
    print("PLAYER RANKINGS")
    for a in players:
        print (a.getRank(), a.getName())
        

            
def main():
    
    readFile()
    
    Pranking()
    Tranking()
    
    x = 0
    while True:
        #print menu, have it welcome and display options. take in pick, and direct accordingly
        x = eval(input("\nWhat would you like to do: \n1. List Teams\n2. View Team \n3. Find Player \n4. Ranking \n5. Calander\n6. Update Scores "))
        #have shuffle teams, add player, and move players as an option within the view teams option
    
        if (x==1):
            listTeams()
        if (x==2):
            viewTeam()
        if (x==3):
            findPlayer()
        if (x==4):
            a = eval(input("Would you like to see (1) Player Ranking or (2) Team Ranking? "))
            if a == 1:
                PprintRank()
            if a == 2:
                TprintRank()
                
        if (x==5):
            schedule()
        if (x==6):
            newScores()
    
    


main()
